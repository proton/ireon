Руководство по компиляции и сборке проекта
==========================================


Содержание
----------
  1. Требования
  2. Базовая информация о процессе сборки
  3. Компиляция документации
  4. Где получить помощь



1. Требования
-------------
  Для сборки проекта вам потребуется:
   * компилятор с++:
     Microsoft Visual C++ начиная с версии 7.1 (2003). Компиляция на предыдущих версиях не гарантируется.
     Python (http://www.python.org/) версии не ниже 2.3
     Java 2 Platform, Standard Edition (J2SE) версии не ниже 1.4
     (опционально, для рендеринга документации)
     http://java.sun.com/j2se/corejava/index.jsp

  Убедитесь, что java и python прописаны в путях доступа (переменной
  окружения PATH).



2. Базовая информация о процессе сборки
---------------------------------------
  Сборка происходит с использованием SCons (http://www.scons.org) --
  build tool'a, написанного на python'е. Он включен в этот
  дистрибутив (src_root/build/scons/scons.py), как и несколько
  вспомогательных утилит. Выполнять скрипт сборки необходимо из
  каталога src_root (каталога, в котором находится этот файл),
  например, так:

    python build/scons/scons.py здесь_target



3. Компиляция документации
--------------------------
  Документация для нашего проекта поставляется в виде xml-файлов
  (http://www.w3.org/XML/) в нотации docbook (http://docbook.org/).
  Преимущество такого подхода в том, что пользователь при надлежащем
  стремлении может преобразовать эти файлы практически в любой
  формат. Минус состоит в том, что для удобного просмотра
  документацию необходимо преобразовать из исходных файлов. Нашим
  проектом поставляется набор утилит, которые выполняют практически
  не требующее никаких усилий преобразование в форматы xhtml и pdf.
  Преобразование в другие форматы оставляется на усмотрение
  пользователя.

  Чтобы избавить пользователя от необходимости самостоятельно
  разбираться в тонкостях процесса преобразования документов мы
  подготовили набор скриптов, с помощью которых компиляция
  документации требует всего лишь ввода трех команд.


  3.1 Установка необходимых утилит
  --------------------------------
    Полный набор утилит для компиляции документов занимает более 8
    Мб. Поэтому мы разделили его на две поставкиЖ базовую и полную.
    Базовая поставка дает возможность рендеринга в html всех
    документов. Полная поставка добавляет к этому рендеринг в pdf.
    Если вам не нужен рендеринг в pdf, то следует выбрать базовую
    поставку.

    Скачивание и установка необходимых утилит производятся
    автоматически с помощью поставляемых скриптов.

    Для скачивания и установки базового комплекта утилит впыполните

      python build/scons/scons.py install-prereqs-docbook-html

    Для получения полного комплекта утилит выполните

      python build/scons/scons.py install-prereqs-docbook

    После запуска команды с нашего сайта будет скачан сначала
    перечень файлов, а потом и сами файлы (не забудьте разрешить это
    файрволлу, если он у вас есть), потом эти файлы будут
    установлены в папку src_root/build/docbook/

    Вот список того, что должно скачаться:
      * процессор xslt saxon
      * dtd docbook
      * xsl-файлы для трансформаций
      * специализированные xsl-файлы проекта ireon.org
      * комплект дополнительных изображений для xhtml

    В полном комплекте также присутствует:
      * FOP (Formatting Objects Processor)
      * набор шрифтов для fop

    Всего будет скачано порядка 1,5-2 Мб для базового комплекта и
    8 Мб для полного.

    Данную команду необходимо выполнить только один раз - для
    загрузки и установки нужных утилит. После того, как утилиты
    установлены, вы можете сразу переходить непосредственно к
    компиляции документов, минуя данную команду.

    Если во время выполнения команды сообщений об ошибках не
    выводилось, то переходите к следующем пункту.

    Обновление утилит
    -----------------
    * Для обновления утилит необходимо выполнять те же команды, что
    * и для скачивания и установки. Скачиваться будут только
    * обновленные файлы.


  3.2 Компиляция документации
  ---------------------------
    Компиляция документации производится следующей командой:

      python build/scons/scons.py <target>

    где вместо <target> надо вставить одну или несколько из целей,
    описанных ниже. Например, так:

      python build/scons/scons.py docs-development docs-chronicles

    или просто

      python build/scons/scons.py docs

    чтобы скомпилировать всю имеющуюся документацию.


    Дерево целей:
    -------------
    + docs
    | вся документация вместе взятая
    |
    |-+ docs-development
    | | документация по процессу разработки
    | |
    | |-+ docs-development-scmp
    | | | план управления конфигурациями
    | |
    | |-+ docs-development-spmp
    | | | план управления проектом
    |
    |-+ docs-game_design
    | | докуменатция по гейм дизайну
    | |
    | |-+ docs-game_design-concept
    | | | концепт-документ проекта
    | |
    | |-+ docs-game_design-game_basics
    | | | основы игрового мира
    | |
    | |-+ docs-game_design-chronicles
    | | | хроники мира иреона
    | |
    | |-+ docs-game_design-srs
    | | | спецификация требований (**диздок**)
    | |
    | |-+ docs-game_design-world_guide
    | | | описание острова Новалия (локации)
    |
    |-+ docs-papers
    | | различные дополнительные документы, статьи
    | |
    | |-+ docs-papers-cvs_tutorial
    | | | краткий туториал по cvs
    | |
    | |-+ docs-papers-constructive_politics
    | | | перевод статьи Mathew Mihaly о политике в ММОРПГ


    Для каждой указанной цели можно добавить суффикс -html или -pdf
    для генерации, соответственно, только html или только pdf
    версии. Например, команда

      python build/scons/scons.py docs-development-pdf

    скомпилирует pdf версии всех документов по процессу разработки
    (обратите внимание, что для этого у вас должен быть установлен
    полный комплект утилит).

    Если все пройдет успешно, то скомпилированная документация
    должна оказаться в подкаталогах каталога
    src_root/build/output/<os>/doc, где <os> -- тип вашей
    операционной системы. Например, для Windows папка будет
    src_root/build/output/win32/doc.


  3.3 Установка документации
  --------------------------
    Если вы не планируете более пересобирать документацию, то мы
    рекомендуем установить ее в то место, где она должна быть в
    дистрибутиве, то есть в папке doc корня дистрибутива. Это
    делается командой

      python build/scons/scons.py install-<target>

    где <target> -- та цель, с которой вы компилировали документацию
    в предыдущем шаге. Например, если вы компилировали документацию
    следующей командой

      python build/scons/scons.py docs-html

    то установить ее можно такой командой

      python build/scons/scons.py install-docs-html



4. Компиляция программ
----------------------

 4.1. Зависимости
  Прежде чем компилировать программу, вам нужно получить зависимости -
  библиотечные и бинарные файлы. Их вы можете скачать отсюда:
  http://www.ireon.org/downloads.html.
  Распакуйте архив в директорию с исходными кодами проекта.
 
 4.2. Сборка
  Файлы для сборки проекта находятся в директории src_root/build. Ищите
  нужный вам скрипт и собирайте.



5. Где получить помощь по сборке
--------------------------------
  Любую помощь по вопросам, касающимся проекта, в том числе и по
  сборке, вы можете получить в следующих местах:
    * на форуме проекта - http://forum.ireon.org/
    * на канале проекта в irc - #ireon, сеть rusnet
      руководство по подключению http://wiki.ireon.org/index.php/Irc
    * по почте - help-build@ireon.org


$Id: README_RU 391 2005-12-13 15:49:32Z llyeli $

